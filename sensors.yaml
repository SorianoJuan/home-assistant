#sensor: Forecast
- platform: yr
  name: Pronostico
  forecast: 24
  monitored_conditions:
    - temperature
    - symbol
    - precipitation
    - windSpeed
    - pressure
    - windDirection
    - humidity
    - fog
    - cloudiness
    - lowClouds
    - mediumClouds
    - highClouds
    - dewpointTemperature
#sensor 2: 
- platform: time_date
  display_options:
    - "date_time"
#sensor 3:
- platform: systemmonitor
  resources:
    - type: disk_free
      arg: /home
    - type: memory_free
    - type: processor_use
    - type: last_boot
    - type: ipv4_address
      arg: wlan0
#sensor 4: Speedtest
- platform: speedtest
  monitored_conditions:
    - ping
    - download
    - upload
#sensor 5: Travis
- platform: travisci
  api_key: !secret travis_token
  scan_interval: 30
  default_branch: hidroponia
  repository_names:
    - home-assistant

#############
#INVERNADERO
#############
#sensor 6: Temperatura
- platform: mqtt
  name: "Temperatura ambiente"
  state_topic: "invernadero/sensor/temperature1"
  qos: 0
  unit_of_measurement: "°C"
  force_update: true
#sensor 7: Humedad
- platform: mqtt
  name: "Humedad ambiente"
  state_topic: "invernadero/sensor/humidity1"
  qos: 0
  unit_of_measurement: "%"
  force_update: true
#############
# PLANTA 1
#############
#sensor 8: pH - planta 1
- platform: mqtt
  name: "pH - planta 1"
  state_topic: "planta1/sensor/ph"
  qos: 0
  unit_of_measurement: "pH"
  force_update: true
#sensor 9: EC - planta 1
- platform: mqtt
  name: "Conductividad eléctrica - planta 1"
  state_topic: "planta1/sensor/ec"
  qos: 0
  unit_of_measurement: "Siemens"
  force_update: true
#############
# PLANTA 2
#############
#sensor 10: pH - planta 2
- platform: mqtt
  name: "pH - planta 2"
  state_topic: "planta2/sensor/ph"
  qos: 0
  unit_of_measurement: "pH"
  force_update: true
#sensor 11: EC - planta 2
- platform: mqtt
  name: "Conductividad eléctrica - planta 2"
  state_topic: "planta2/sensor/ec"
  qos: 0
  unit_of_measurement: "Siemens"
  force_update: true
#############
# PLANTA 3
#############
#sensor 12: pH - planta 3
- platform: mqtt
  name: "pH - planta 3"
  state_topic: "planta3/sensor/ph"
  qos: 0
  unit_of_measurement: "pH"
  force_update: true
#sensor 13: EC - planta 3
- platform: mqtt
  name: "Conductividad eléctrica - planta 3"
  state_topic: "planta3/sensor/ec"
  qos: 0
  unit_of_measurement: "Siemens"
  force_update: true

#Test tiempo desde el ultimo update
- platform: template
  sensors:
    tiempo_temperatura:
      friendly_name: "tiempo temp"
      entity_id: sensor.date__time
      value_template: "{{as_timestamp(now()) - as_timestamp(states.sensor.temperatura_ambiente.last_changed)}}"


#############
# PRESENCIAS
#############
#device_id (Required): The device id to track for this sensor.
#name (Optional): The name of the sensor.
#state_topic (Optional): The topic that contains all subtopics for the rooms.
#timeout (Optional): The time in seconds after which a room presence state is considered old. An example: device1 is reported at scanner1 with a distance of 1. No further updates are sent from scanner1. After 5 seconds scanner2 reports device1 with a distance of 2. The old location info is discarded in favor of the new scanner2 information as the timeout has passed.
#away_timeout (Optional): The time in seconds after which the state should be set to not_home if there were no updates. 0 disables the check and is the default.
#--------------------------
#sensor 14: presencia T Invernadero
#- platform: mqtt_room
#  device_id: sensor.temperatura_ambiente
#  name: "Temperatura ambiente on/off"
#  state_topic: invernadero/sensor/temperature1/presence
#  timeout: 60
#  away_timeout: 60
#
#- platform: template
#  sensors:
#    lastupdated:
#      friendly_name: "Ultimo update de temperatura: "
#      entity_id: sensor.temperatura_ambiente
#      value_template: '{{as_timestamp(states.sensor.temperatura_ambiente.last_changed)}}'

